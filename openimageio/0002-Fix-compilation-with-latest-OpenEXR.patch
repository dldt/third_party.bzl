From 1420a5d204ebe0c8f9a2e259c708ee89f9d34def Mon Sep 17 00:00:00 2001
From: Thomas Arcila <thomas.arcila@gmail.com>
Date: Thu, 23 Dec 2021 06:34:03 +0100
Subject: [PATCH 2/2] Fix compilation with latest OpenEXR

---
 src/dpx.imageio/dpxinput.cpp       |  8 ++--
 src/openexr.imageio/exrinput.cpp   | 62 +++++++++++++++---------------
 src/openexr.imageio/exrinput_c.cpp |  2 +-
 src/openexr.imageio/exroutput.cpp  | 60 ++++++++++++++---------------
 4 files changed, 66 insertions(+), 66 deletions(-)

diff --git a/src/dpx.imageio/dpxinput.cpp b/src/dpx.imageio/dpxinput.cpp
index edfeb028..7e386716 100644
--- a/src/dpx.imageio/dpxinput.cpp
+++ b/src/dpx.imageio/dpxinput.cpp
@@ -6,16 +6,16 @@
 #include <iomanip>
 #include <memory>
 
-#include <OpenEXR/ImfTimeCode.h>  //For TimeCode support
+#include <ImfTimeCode.h>  //For TimeCode support
 
 // Note: libdpx originally from: https://github.com/PatrickPalmer/dpx
 // But that seems not to be actively maintained.
 #include "libdpx/DPX.h"
 #include "libdpx/DPXColorConverter.h"
 
-#include <OpenImageIO/imageio.h>
-#include <OpenImageIO/strutil.h>
-#include <OpenImageIO/typedesc.h>
+#include <imageio.h>
+#include <strutil.h>
+#include <typedesc.h>
 
 OIIO_PLUGIN_NAMESPACE_BEGIN
 
diff --git a/src/openexr.imageio/exrinput.cpp b/src/openexr.imageio/exrinput.cpp
index d9c51aba..6baf52a0 100644
--- a/src/openexr.imageio/exrinput.cpp
+++ b/src/openexr.imageio/exrinput.cpp
@@ -25,11 +25,11 @@ using boost::integer::gcd;
 using boost::math::gcd;
 #endif
 
-#include <OpenEXR/ImfChannelList.h>
-#include <OpenEXR/ImfEnvmap.h>
-#include <OpenEXR/ImfInputFile.h>
-#include <OpenEXR/ImfTestFile.h>
-#include <OpenEXR/ImfTiledInputFile.h>
+#include <ImfChannelList.h>
+#include <ImfEnvmap.h>
+#include <ImfInputFile.h>
+#include <ImfTestFile.h>
+#include <ImfTiledInputFile.h>
 
 #ifdef OPENEXR_VERSION_MAJOR
 #    define OPENEXR_CODED_VERSION                                    \
@@ -51,37 +51,37 @@ using boost::math::gcd;
 OIIO_PRAGMA_VISIBILITY_PUSH
 OIIO_PRAGMA_WARNING_PUSH
 OIIO_GCC_PRAGMA(GCC diagnostic ignored "-Wunused-parameter")
-#include <OpenEXR/IexBaseExc.h>
-#include <OpenEXR/IexThrowErrnoExc.h>
-#include <OpenEXR/ImfBoxAttribute.h>
-#include <OpenEXR/ImfChromaticitiesAttribute.h>
-#include <OpenEXR/ImfCompressionAttribute.h>
-#include <OpenEXR/ImfDeepFrameBuffer.h>
-#include <OpenEXR/ImfDeepScanLineInputPart.h>
-#include <OpenEXR/ImfDeepTiledInputPart.h>
-#include <OpenEXR/ImfDoubleAttribute.h>
-#include <OpenEXR/ImfEnvmapAttribute.h>
-#include <OpenEXR/ImfFloatAttribute.h>
-#include <OpenEXR/ImfHeader.h>
+#include <IexBaseExc.h>
+#include <IexThrowErrnoExc.h>
+#include <ImfBoxAttribute.h>
+#include <ImfChromaticitiesAttribute.h>
+#include <ImfCompressionAttribute.h>
+#include <ImfDeepFrameBuffer.h>
+#include <ImfDeepScanLineInputPart.h>
+#include <ImfDeepTiledInputPart.h>
+#include <ImfDoubleAttribute.h>
+#include <ImfEnvmapAttribute.h>
+#include <ImfFloatAttribute.h>
+#include <ImfHeader.h>
 #if OPENEXR_HAS_FLOATVECTOR
-#    include <OpenEXR/ImfFloatVectorAttribute.h>
+#    include <ImfFloatVectorAttribute.h>
 #endif
-#include <OpenEXR/ImfInputPart.h>
-#include <OpenEXR/ImfIntAttribute.h>
-#include <OpenEXR/ImfKeyCodeAttribute.h>
-#include <OpenEXR/ImfMatrixAttribute.h>
-#include <OpenEXR/ImfMultiPartInputFile.h>
-#include <OpenEXR/ImfPartType.h>
-#include <OpenEXR/ImfRationalAttribute.h>
-#include <OpenEXR/ImfStringAttribute.h>
-#include <OpenEXR/ImfStringVectorAttribute.h>
-#include <OpenEXR/ImfTiledInputPart.h>
-#include <OpenEXR/ImfTimeCodeAttribute.h>
-#include <OpenEXR/ImfVecAttribute.h>
+#include <ImfInputPart.h>
+#include <ImfIntAttribute.h>
+#include <ImfKeyCodeAttribute.h>
+#include <ImfMatrixAttribute.h>
+#include <ImfMultiPartInputFile.h>
+#include <ImfPartType.h>
+#include <ImfRationalAttribute.h>
+#include <ImfStringAttribute.h>
+#include <ImfStringVectorAttribute.h>
+#include <ImfTiledInputPart.h>
+#include <ImfTimeCodeAttribute.h>
+#include <ImfVecAttribute.h>
 OIIO_PRAGMA_WARNING_POP
 OIIO_PRAGMA_VISIBILITY_POP
 
-#include <OpenEXR/ImfCRgbaFile.h>
+#include <ImfCRgbaFile.h>
 
 #if OPENEXR_CODED_VERSION >= 30100 && defined(OIIO_USE_EXR_C_API)
 #    define USE_OPENEXR_CORE
diff --git a/src/openexr.imageio/exrinput_c.cpp b/src/openexr.imageio/exrinput_c.cpp
index 43763334..6d3e1b1c 100644
--- a/src/openexr.imageio/exrinput_c.cpp
+++ b/src/openexr.imageio/exrinput_c.cpp
@@ -25,7 +25,7 @@ using boost::integer::gcd;
 using boost::math::gcd;
 #endif
 
-#include <OpenEXR/openexr.h>
+#include <openexr.h>
 
 #ifdef OPENEXR_VERSION_MAJOR
 #    define OPENEXR_CODED_VERSION                                    \
diff --git a/src/openexr.imageio/exroutput.cpp b/src/openexr.imageio/exroutput.cpp
index e11cf0c1..a4039ce9 100644
--- a/src/openexr.imageio/exroutput.cpp
+++ b/src/openexr.imageio/exroutput.cpp
@@ -13,10 +13,10 @@
 
 #include <OpenImageIO/platform.h>
 
-#include <OpenEXR/ImfChannelList.h>
-#include <OpenEXR/ImfEnvmap.h>
-#include <OpenEXR/ImfOutputFile.h>
-#include <OpenEXR/ImfTiledOutputFile.h>
+#include <ImfChannelList.h>
+#include <ImfEnvmap.h>
+#include <ImfOutputFile.h>
+#include <ImfTiledOutputFile.h>
 
 #ifdef OPENEXR_VERSION_MAJOR
 #    define OPENEXR_CODED_VERSION                                    \
@@ -38,34 +38,34 @@
 OIIO_PRAGMA_VISIBILITY_PUSH
 OIIO_PRAGMA_WARNING_PUSH
 OIIO_GCC_PRAGMA(GCC diagnostic ignored "-Wunused-parameter")
-#include <OpenEXR/IexBaseExc.h>
-#include <OpenEXR/ImfBoxAttribute.h>
-#include <OpenEXR/ImfCRgbaFile.h>  // JUST to get symbols to figure out version!
-#include <OpenEXR/ImfChromaticitiesAttribute.h>
-#include <OpenEXR/ImfCompressionAttribute.h>
-#include <OpenEXR/ImfEnvmapAttribute.h>
-#include <OpenEXR/ImfFloatAttribute.h>
+#include <IexBaseExc.h>
+#include <ImfBoxAttribute.h>
+#include <ImfCRgbaFile.h>  // JUST to get symbols to figure out version!
+#include <ImfChromaticitiesAttribute.h>
+#include <ImfCompressionAttribute.h>
+#include <ImfEnvmapAttribute.h>
+#include <ImfFloatAttribute.h>
 #if OPENEXR_HAS_FLOATVECTOR
-#    include <OpenEXR/ImfFloatVectorAttribute.h>
+#    include <ImfFloatVectorAttribute.h>
 #endif
-#include <OpenEXR/ImfHeader.h>
-#include <OpenEXR/ImfIntAttribute.h>
-#include <OpenEXR/ImfKeyCodeAttribute.h>
-#include <OpenEXR/ImfMatrixAttribute.h>
-#include <OpenEXR/ImfRationalAttribute.h>
-#include <OpenEXR/ImfStringAttribute.h>
-#include <OpenEXR/ImfTimeCodeAttribute.h>
-#include <OpenEXR/ImfVecAttribute.h>
-
-#include <OpenEXR/ImfDeepFrameBuffer.h>
-#include <OpenEXR/ImfDeepScanLineOutputPart.h>
-#include <OpenEXR/ImfDeepTiledOutputPart.h>
-#include <OpenEXR/ImfDoubleAttribute.h>
-#include <OpenEXR/ImfMultiPartOutputFile.h>
-#include <OpenEXR/ImfOutputPart.h>
-#include <OpenEXR/ImfPartType.h>
-#include <OpenEXR/ImfStringVectorAttribute.h>
-#include <OpenEXR/ImfTiledOutputPart.h>
+#include <ImfHeader.h>
+#include <ImfIntAttribute.h>
+#include <ImfKeyCodeAttribute.h>
+#include <ImfMatrixAttribute.h>
+#include <ImfRationalAttribute.h>
+#include <ImfStringAttribute.h>
+#include <ImfTimeCodeAttribute.h>
+#include <ImfVecAttribute.h>
+
+#include <ImfDeepFrameBuffer.h>
+#include <ImfDeepScanLineOutputPart.h>
+#include <ImfDeepTiledOutputPart.h>
+#include <ImfDoubleAttribute.h>
+#include <ImfMultiPartOutputFile.h>
+#include <ImfOutputPart.h>
+#include <ImfPartType.h>
+#include <ImfStringVectorAttribute.h>
+#include <ImfTiledOutputPart.h>
 OIIO_PRAGMA_WARNING_POP
 OIIO_PRAGMA_VISIBILITY_POP
 
-- 
2.32.0

